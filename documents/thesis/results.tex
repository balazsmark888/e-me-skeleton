%!TEX root = dolgozat.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Results and evaluation}\label{ch:elemzes}

\section{Metrics}

\subsection{Encryption/decryption speed}

Since the major features of the application revolve around data security and encryption,
it is important to select the correct methodology for data protection in terms of both efficiency and security \cite{singh2013study}.
\emph{AES-256} is a flexible, yet extremely secure option in terms of information protection.
Although it is virtually impenetrable using brute-force methods, in terms of resources it is less efficient than the \emph{DES (data encryption standard) algorithms}.

\begin{figure}[H]
	\centering
	\input{encryption.tikz}
	\caption{Encryption/Decryption duration over file size}
\end{figure}

As the above graph illustrates, the cryptographic operations have a linear (O(n)) time complexity, the decryption being slightly more demanding in general.
In real-life scenarios the majority of the documents handled by the application do not reach 10 MB in size.
This denotes that generally the cryptographic operations for a single document would not cross 15 milliseconds.
\emph{Note: the measurements were taken using an Intel\textregistered  Core\texttrademark  i7-4790K CPU @ 4.00 GHz processor and 16 GB of DDR3 RAM on a desktop PC.}

\section{System requirements}

From a hardware point of view, the application falls into the ligh-weight category, since it is not using algorithms with high time- or space-complexity.
A major factor regarding the physical capabilities of the server is the size of the userbase, the scale of the application.
Although the server can run on machines with fairly low performance with ease, a high number of consecutive requests can drastically influence 
performance or even cause server outage or failure.
Taking this into consideration, the recommended specifications are estimated to be capable of handling approximately \emph{10 000 users}.

\subsection{Recommended hardware specifications}

\subsubsection{Web Server (\emph{including database server})} 

\begin{itemize}
	\item CPU: Octa-Core 2.8 GHz CPU or higher
	\item RAM: 16 GB available RAM (DDR4) or higher
	\item Storage: 50 GB available hard disk space
\end{itemize}

\subsubsection{Mobile application}

\begin{itemize}
	\item CPU: Qualcomm\textregistered Snapdragon\texttrademark 765 or newer
	\item RAM: 2 GB available RAM
	\item Storage: 4 GB of non-volatile storage
	\item Rear camera: 720p resolution or higher
\end{itemize}

\subsection{Software requirements}

\subsubsection{Web Server}

\begin{itemize}
	\item Microsoft Windows Server 2012 or 2012 R2 operating system
	\item .NET 5 runtime + Hosting Bundle for IIS Support
	\item IIS 10.0
	\item Microsoft OLE DB Driver 18 for SQL Server
	\item Microsoft SQL Server 2019
	\item Microsoft SQL Server Management Studio (or optionally HeidiSQL)
\end{itemize}

\subsubsection{Mobile application}

\begin{itemize}
	\item Android 10.0 (Q)
\end{itemize}

\section{Obstacles and difficulties}

As expected, no application development process exists without its intricacies and E-me is no exception.
In the course of one year, there were multiple obstacles and difficulties that had to be tackled in order to create the current version of the application,
some of them slowing down the development process by days or even weeks.

These impediments provided a great deal of knowledge when it comes to preemtive thinking and the organization of a work process that requires multiple
steps and layers to complete.
In my opinion, the majority of the following obstacles are easily avoidable with in-depth analysis of the technologies and processes that build up the application.

\subsection{HTTPS on Android}

When it comes to networking, the mobile operating systems are extremely strict and do not provide the same level of flexibility in terms of 
communication with the backend as regular web applications.
This characteristic is a consequence of the closed design of the mobile environments which serves the purpose of personal data security and user protection.
Although being more secure, this strict structure is a disadvantage when it comes to application development on a mobile device.

Since the backend of the application requires HTTPS to be accessed, the frontend had to follow this rule and set up its requests accordingly.
In order to use HTTPS, the server needs to have a \emph{SSL Certificate} to enable connecting devices to verify the server's identity and legitimacy.
At first, E-me's backend used the \emph{Development-time SSL certificate} provided by IIS to achieve this.
However, this is not a globally valid certificate and it is to be used only in a development environment, and when it comes to Android, it does not
allow connections to these types of servers on HTTPS.

The first approach to the problem was to create a self-signed certificate either using \emph{OpenSSL} or \emph{IIS}.
These solutions seemed reasonable for development-time support for HTTPS, however both attemps failed miserably when it came to installing the
certificates on the Android Emulator. 
The authority (\emph{CA}) of these newly generated certificates was not a universally accepted Certificate Authority (hence the \emph{self} part), which means
they were not accepted by Android 10.

After some research, I came across \emph{Certbot}, which is a free, open source software tool for generating \emph{Let's Encrypt} certificates on
manually-administered websites to enable HTTPS.
It is made by the \emph{Electronic Frontier Foundation (EFF)} which is a nonprofit that stands for (amongst other) digital privacy.
Using this piece of technology, I was able to request a free SSL certificate for the application which solved the issue of connecting the two major layers
of the application using HTTPS.

\subsection{Windows CNG and the Mono runtime}

Since cryptography and the \emph{Diffie-Hellman key exchange} are major components for both the backend and the frontend of the application,
their implementation required a great amount of resources.
For these components a separate solution was created in order to implement proofs of concept for functionalities such as key derivation, 
document encryption and decryption and automatic document form-filling.
These proofs of concept were implemented using \emph{.NET 5.0} which includes the implementation for the \emph{Windows Cryptographic Next Generation API} that
also provides interfaces and implementations for the \emph{Elliptic Curve Diffie Hellman} and other key derivation methods and algorithms.

In order to use these functionalities on the frontend, these had to be implemented using \emph{.NET Standard}, since the \emph{Xamarin Forms} project
cannot have dependencies on \emph{.NET 5.0} libraries.
This transition between the different frameworks was a smooth process without major difficulties.
The \emph{Shared} project was created, containing the cryptographic algorithms that were functioning perfectly on the backend.

When it comes to the frontend, after adding the \emph{Shared} project as a dependency and running the generated native Android application, a runtime error occured.
After some investigation, I realized that although \emph{Xamarin Forms} allows the utilization of the \emph{Windows CNG API}, \emph{Mono runtime} does not have the implementation for it.
This issue had no workarounds, the libraries that depended on the \emph{Windows CNG} had to be replaced.

The first approach was to implement these cryptographic libraries, including key derivation and encryption, however this would have 
required an extreme amount of resources in terms of research and time of development.
After days of investigation, I've discovered an open-source implementation of the \emph{X25519 Elliptic Curve Diffie-Hellman} by Hans Wolff.
Using this implementation, combined with the cross-platform \emph{AesCryptoServiceProvider} I was able to replace the earlier dismissed Windows-dependent
library. 

\section{Possibilities for future upgrades}

Since E-me is a fairly simple mobile application, there are multiple directions in which it can be improved and expanded.
In terms of availability, the application can be easily implemented on multiple platforms (ex. iOS, UWP, web applications and desktop applications), since it
has a cross-platform framework as its base.

As for additional features, the application has a wide variety of possible upgrades to choose from.
Since E-me requires the authentication of the user, adding \emph{biometric authentication methods} would greatly increase the practicality of
the application.
These authentication methods can include fingerprint scanning and face- and/or voice-recognition.
This way the user would be able to skip the process of logging in when they open the application, enabling for a higher level of comfort while using it.

Being a document-handling app, a possible way of improvement for E-me is enabling digital signatures.
With this feature, the users would be able to verify and sign official documents within the application.
This would provide a new layer of security for the application, but also would enable handling more sensitive legal documents that would otherwise 
require a signed paper form.

In general, documents are dependent on already existing official papers that contain certain personal information, state contractual
relationships and/or grant some rights.
Representing these dependencies in the application would not only provide transparency about the structure of how legal documents are in relationship
with each other, but it would provide practical features in terms of requesting documents or restricting certain document types for users.
These dependencies can be treated as a directed graph (not tree, since a document can have multiple \emph{parents}) where each node represents a document and the paths
between nodes specify the dependencies themselves.
A convenient way of utilizing this graph representation is requesting documents \emph{in bulk} which would simplify the process for the user, since
it allows for requesting a document and all of its dependencies while performing one single action.

In parrallel with the digital signature, adding a separate \emph{Administration} layer through which certified professionals
 would be able to manage and verify documents and user information validity (ex. government), could
greatly increase the potential of the application in terms of every-day use.
This administrative layer, combined with the digitally signed documents, would not only mean high level of data validity and privacy, but the documents handled
through the application could be accepted by institutions and authorities of the state.

In order to correctly identify and complete forms within the documents, the application requires pre-processed document templates.
At the current state of E-me, these templates are to be prepared and uploaded individually.
This manual processing can often be time consuming and leaves room for human error which could result in faulty documents or unnecessary data exposure.
With the aim of tackling this shortcoming, the application would be able to use \emph{Machine Learning}.
The main concept of this AI-based approach would be to identify and interpret the forms of documents based on how the users of the application fill them out.
E-me would learn how to complete certain documents based on real-life examples and this way it would be able to make predictions for newly added document templates.
This addition would greatly reduce the time cost of maintaining the templates of the application and it would help in reducing the possibilities of human blunders.